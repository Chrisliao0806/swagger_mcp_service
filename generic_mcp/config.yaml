# ========================================
# Generic MCP Service Configuration
# ========================================
# æ”¯æ´å¤šç¨® MCP Serverï¼š
# 1. OpenAPI/Swagger è‡ªå‹•ç”Ÿæˆçš„ MCP Server
# 2. ç¬¬ä¸‰æ–¹ MCP Serverï¼ˆå¦‚ mcp-server-fetchï¼‰
# 3. è‡ªå®šç¾© MCP Server
#
# ğŸ†• æ–°åŠŸèƒ½ï¼šç¬¬ä¸‰æ–¹ MCP Server çš„ description å’Œ tools_description
#    ç¾åœ¨æœƒè‡ªå‹•å¾ server ç²å–ï¼Œä¸éœ€è¦æ‰‹å‹•å¡«å¯«ï¼

# ========================================
# MCP Servers è¨­å®š
# ========================================
# å¯ä»¥é…ç½®å¤šå€‹ MCP Serverï¼ŒClient æœƒåŒæ™‚é€£æ¥æ‰€æœ‰å•Ÿç”¨çš„ server
mcp_servers:
  # --------------------------------------------------
  # OpenAPI/Swagger é¡å‹çš„ MCP Server
  # --------------------------------------------------
  - name: "å¤©æ°£æŸ¥è©¢ API"
    type: "openapi"  # openapi é¡å‹æœƒè‡ªå‹•å•Ÿå‹•å…§å»ºçš„ server.py
    enabled: true   # è¨­ç‚º false å¯æš«æ™‚åœç”¨æ­¤ serverï¼ˆéœ€è¦å…ˆå•Ÿå‹• API serverï¼‰
    
    # OpenAPI ç›¸é—œè¨­å®š
    openapi:
      # OpenAPI/Swagger è¦æ ¼ä¾†æºï¼ˆäºŒé¸ä¸€ï¼‰
      # æ–¹å¼ä¸€ï¼šç›´æ¥å¾ URL è®€å– OpenAPI JSON
      openapi_url: "https://opendata.cwa.gov.tw/dist/opendata-swagger.html"
      
      # æ–¹å¼äºŒï¼šå¾æœ¬åœ°æª”æ¡ˆè®€å–ï¼ˆè‹¥è¨­å®šæ­¤é …ï¼Œæœƒå„ªå…ˆä½¿ç”¨ï¼‰
      # openapi_file: "./openapi.json"
      
      # API åŸºç¤ URLï¼ˆè‹¥ OpenAPI è¦æ ¼ä¸­æœªå®šç¾©ï¼Œå‰‡ä½¿ç”¨æ­¤å€¼ï¼‰
      base_url: "https://opendata.cwa.gov.tw/api"
      
      # è«‹æ±‚è¶…æ™‚æ™‚é–“ï¼ˆç§’ï¼‰
      timeout: 30
    
    # Tool ç”Ÿæˆè¨­å®š
    tool_generation:
      include_all: true
      exclude_endpoints: []
      snake_case_names: true
      simplified_names: true

  - name: "æ¡è³¼åŠ©æ‰‹ API"
    type: "openapi"  # openapi é¡å‹æœƒè‡ªå‹•å•Ÿå‹•å…§å»ºçš„ server.py
    enabled: true   # è¨­ç‚º false å¯æš«æ™‚åœç”¨æ­¤ serverï¼ˆéœ€è¦å…ˆå•Ÿå‹• API serverï¼‰
    
    # OpenAPI ç›¸é—œè¨­å®š
    openapi:
      # OpenAPI/Swagger è¦æ ¼ä¾†æºï¼ˆäºŒé¸ä¸€ï¼‰
      # æ–¹å¼ä¸€ï¼šç›´æ¥å¾ URL è®€å– OpenAPI JSON
      openapi_url: "http://localhost:8000/openapi.json"
      
      # æ–¹å¼äºŒï¼šå¾æœ¬åœ°æª”æ¡ˆè®€å–ï¼ˆè‹¥è¨­å®šæ­¤é …ï¼Œæœƒå„ªå…ˆä½¿ç”¨ï¼‰
      # openapi_file: "./openapi.json"
      
      # API åŸºç¤ URLï¼ˆè‹¥ OpenAPI è¦æ ¼ä¸­æœªå®šç¾©ï¼Œå‰‡ä½¿ç”¨æ­¤å€¼ï¼‰
      base_url: "http://localhost:8000"
      
      # è«‹æ±‚è¶…æ™‚æ™‚é–“ï¼ˆç§’ï¼‰
      timeout: 30
    
    # Tool ç”Ÿæˆè¨­å®š
    tool_generation:
      include_all: true
      exclude_endpoints: []
      snake_case_names: true
      simplified_names: true

  # --------------------------------------------------
  # ç¬¬ä¸‰æ–¹ MCP Serverï¼šmcp-server-fetch
  # --------------------------------------------------
  - name: "Fetch (ç¶²é ç²å–)"
    type: "external"  # external é¡å‹è¡¨ç¤ºå¤–éƒ¨ MCP Server
    enabled: true
    
    # åŸ·è¡Œå‘½ä»¤è¨­å®š
    command: "uvx"
    args: ["mcp-server-fetch"]
    # å¦‚æœç”¨ pip å®‰è£çš„ï¼Œæ”¹ç”¨ï¼š
    # command: "python"
    # args: ["-m", "mcp_server_fetch"]
    
    # ğŸ†• å·¥å…·æè¿°ç¾åœ¨æœƒè‡ªå‹•å¾ MCP Server ç²å–ï¼
    # ä»¥ä¸‹æ¬„ä½è®Šæˆå¯é¸ï¼Œåªæœ‰åœ¨éœ€è¦è¦†è“‹è‡ªå‹•æè¿°æ™‚æ‰éœ€è¦å¡«å¯«ï¼š
    # description: "å¾ç¶²é ç²å–å…§å®¹ä¸¦è½‰æ›ç‚º markdown"
    # tools_description: |
    #   - **fetch**: å¾æŒ‡å®š URL ç²å–ç¶²é å…§å®¹
    #     - url (å¿…å¡«): è¦ç²å–çš„ç¶²å€
    #     - max_length (å¯é¸): è¿”å›çš„æœ€å¤§å­—å…ƒæ•¸ï¼Œé è¨­ 5000
    #     - start_index (å¯é¸): å¾ç¬¬å¹¾å€‹å­—å…ƒé–‹å§‹ï¼Œé è¨­ 0
    #     - raw (å¯é¸): æ˜¯å¦è¿”å›åŸå§‹å…§å®¹ï¼Œé è¨­ false

  # --------------------------------------------------
  # æ›´å¤šç¬¬ä¸‰æ–¹ MCP Server ç¯„ä¾‹ï¼ˆé è¨­åœç”¨ï¼‰
  # --------------------------------------------------
  - name: "Filesystem"
    type: "external"
    enabled: true
    command: "npx"
    args: ["-y", "@modelcontextprotocol/server-filesystem", "/Users/liaopoyu/Desktop"] # æŒ‡å®šè¦å­˜å–çš„ç›®éŒ„
    description: "å­˜å–æœ¬åœ°æª”æ¡ˆç³»çµ±"

  # - name: "GitHub"
  #   type: "external"
  #   enabled: false
  #   command: "npx"
  #   args: ["-y", "@modelcontextprotocol/server-github"]
  #   env:
  #     GITHUB_PERSONAL_ACCESS_TOKEN: "${GITHUB_TOKEN}"
  #   description: "å­˜å– GitHub å€‰åº«"

  # - name: "Brave Search"
  #   type: "external"
  #   enabled: false
  #   command: "npx"
  #   args: ["-y", "@modelcontextprotocol/server-brave-search"]
  #   env:
  #     BRAVE_API_KEY: "${BRAVE_API_KEY}"
  #   description: "ä½¿ç”¨ Brave æœå°‹å¼•æ“"

# ========================================
# LLM è¨­å®š
# ========================================
llm:
  provider: "openai"
  model: "gpt-4.1-mini"
  temperature: 0

# ========================================
# System Prompt è¨­å®š
# ========================================
system_prompt:
  # å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è®Šæ•¸ï¼š
  # {api_name} - ä¸»è¦ API åç¨±
  # {api_description} - API æè¿°
  # {tools_summary} - è‡ªå‹•ç”Ÿæˆçš„å·¥å…·æ‘˜è¦ï¼ˆåŒ…å«æ‰€æœ‰ MCP server çš„å·¥å…·ï¼‰
  # {servers_info} - å·²é€£æ¥çš„ MCP Server è³‡è¨Š
  
  template: |
    ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„ AI åŠ©æ‰‹ï¼Œå¯ä»¥é€éå¤šç¨®å·¥å…·å”åŠ©ä½¿ç”¨è€…å®Œæˆä»»å‹™ã€‚

    ## ğŸ¯ ç³»çµ±è³‡è¨Š
    {servers_info}

    ## ğŸ› ï¸ å¯ç”¨å·¥å…·
    {tools_summary}

    ## ğŸ“Š è³‡æ–™è§£è®€è¦ç¯„

    ### å·¥å…·å›å‚³æ ¼å¼
    æ‰€æœ‰å·¥å…·éƒ½æœƒå›å‚³ JSON æ ¼å¼çš„åŸå§‹è³‡æ–™ï¼Œä½ éœ€è¦ï¼š
    1. è§£æ JSON çµæ§‹
    2. åˆ¤æ–· `success` æ¬„ä½æ˜¯å¦ç‚º trueï¼ˆè‹¥æœ‰ï¼‰
    3. å¾ `data` æ¬„ä½æå–å¯¦éš›å…§å®¹ï¼ˆè‹¥æœ‰ï¼‰
    4. ä»¥å‹å–„çš„æ ¼å¼å‘ˆç¾çµ¦ä½¿ç”¨è€…

    ### é‡‘é¡é¡¯ç¤ºè¦ç¯„
    - çµ±ä¸€ä½¿ç”¨ã€ŒNT$ã€ä½œç‚ºè²¨å¹£ç¬¦è™Ÿ
    - ä½¿ç”¨åƒåˆ†ä½æ ¼å¼ï¼Œå¦‚ï¼šNT$ 42,000
    - è¨ˆç®—ç¸½åƒ¹æ™‚ï¼šç¸½åƒ¹ = å–®åƒ¹ Ã— æ•¸é‡

    ### æ—¥æœŸé¡¯ç¤ºè¦ç¯„
    - ä½¿ç”¨ YYYY-MM-DD æ ¼å¼
    - å¯é©æ™‚è£œå……ã€Œè·ä»Š X å¤©ã€ç­‰ç›¸å°æ™‚é–“

    ## ğŸ’¬ å°è©±é¢¨æ ¼

    ### èªè¨€
    - ä½¿ç”¨ç¹é«”ä¸­æ–‡
    - å°ˆæ¥­ä½†è¦ªåˆ‡çš„èªæ°£
    - é©åº¦ä½¿ç”¨ emoji å¢åŠ å¯è®€æ€§

    ### ä¸»å‹•æ€§
    - ç™¼ç¾è³‡è¨Šä¸è¶³æ™‚ï¼Œä¸»å‹•è©¢å•
    - ç™¼ç¾ç•°å¸¸æ™‚ï¼Œä¸»å‹•æé†’
    - æ“ä½œå‰ç¢ºèªé—œéµè³‡è¨Š

    ## âš ï¸ æ³¨æ„äº‹é …
    1. **è³‡æ–™ä¸å­˜åœ¨**ï¼šæŸ¥è©¢ç„¡çµæœæ™‚ï¼Œæ¸…æ¥šèªªæ˜ã€ŒæŸ¥ç„¡è³‡æ–™ã€è€Œéç·¨é€ 
    2. **API éŒ¯èª¤**ï¼šè‹¥ success=falseï¼Œé¡¯ç¤º error è¨Šæ¯ä¸¦å»ºè­°ç”¨æˆ¶ç¨å¾Œå†è©¦
    3. **ç¢ºèªæ“ä½œ**ï¼šåŸ·è¡Œå¯«å…¥æ“ä½œå‰ï¼Œç¢ºèªç”¨æˆ¶æ„åœ–
    4. **çµ„åˆä½¿ç”¨**ï¼šå¯ä»¥çµ„åˆå¤šå€‹å·¥å…·ä¾†å®Œæˆè¤‡é›œä»»å‹™

    é–‹å§‹ç‚ºç”¨æˆ¶æä¾›æœå‹™å§ï¼

# ========================================
# é€²éšè¨­å®š
# ========================================
advanced:
  debug: false
  retry_count: 3
  cache_openapi: true
  cache_ttl: 3600
  
  # æ˜¯å¦æŠ‘åˆ¶ç¬¬ä¸‰æ–¹ MCP Server çš„è­¦å‘Šè¨Šæ¯
  suppress_external_warnings: true
